<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Nocturna Wheel - Simple Test</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 20px;
        }
        
        #chart-container {
            width: 600px;
            height: 600px;
            margin: 0 auto;
            border: 1px solid #ccc;
        }
        
        #console {
            margin-top: 20px;
            padding: 10px;
            background-color: #f5f5f5;
            border: 1px solid #ccc;
            font-family: monospace;
            white-space: pre-wrap;
            max-height: 300px;
            overflow-y: auto;
        }
    </style>
</head>
<body>
    <h1>Nocturna Wheel - Simple Test</h1>
    
    <div id="chart-container"></div>
    
    <div id="console"></div>
    
    <!-- Load globals.js first to ensure all classes are defined -->
    <script src="/dist/globals.js"></script>
    
    <!-- Nocturna Wheel Library -->
    <script src="/dist/nocturna-wheel.umd.js"></script>
    
    <!-- Nocturna Fix script to ensure global availability -->
    <script src="/dist/nocturna-fix.js"></script>
    
    <script>
        // Helper function to write to our console
        function log(message) {
            const consoleDiv = document.getElementById('console');
            consoleDiv.innerHTML += message + '\n';
            console.log(message);
        }
        
        // Wait for all scripts to load
        window.onload = function() {
            try {
                log('Window loaded, checking library...');
                
                // Check if NocturnaWheel is defined
                if (typeof window.NocturnaWheel === 'undefined') {
                    throw new Error('NocturnaWheel is not defined on window object');
                }
                
                log('NocturnaWheel found on window object');
                log('WheelChart available: ' + (typeof window.NocturnaWheel.WheelChart === 'function'));
                
                // Create a simple chart
                const chart = new window.NocturnaWheel.WheelChart({
                    container: '#chart-container',
                    planets: {
                        sun: { lon: 45, color: '#ff6600' },
                        moon: { lon: 120, color: '#3399cc' }
                    },
                    houses: [
                        { lon: 0 },   // 1st house cusp
                        { lon: 30 },  // 2nd house cusp
                        { lon: 60 },  // 3rd house cusp
                        { lon: 90 },  // 4th house cusp
                        { lon: 120 }, // 5th house cusp
                        { lon: 150 }, // 6th house cusp
                        { lon: 180 }, // 7th house cusp
                        { lon: 210 }, // 8th house cusp
                        { lon: 240 }, // 9th house cusp
                        { lon: 270 }, // 10th house cusp
                        { lon: 300 }, // 11th house cusp
                        { lon: 330 }  // 12th house cusp
                    ],
                    config: {
                        assets: {
                            basePath: "/assets/"
                        }
                    }
                });
                
                log('Chart created successfully');
                
                // Render the chart
                chart.render();
                log('Chart rendered');
                
            } catch (error) {
                log('ERROR: ' + error.message);
                console.error(error);
            }
        };
    </script>
</body>
</html> 